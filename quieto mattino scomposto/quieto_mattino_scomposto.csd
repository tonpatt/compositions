<CsoundSynthesizer>
<CsOptions>
-odac
; -otest.wav
</CsOptions>
<CsInstruments>

;;; For license information, see the README.md file

;;; Csound Orchestra for "Quieto mattino scomposto"
;;; Gianantonio Patella -- August 2023 (rev. December 2024)

sr      = 44100
kr      = 4410
ksmps   = 10
nchnls  = 2
0dbfs 	= 1
A4 		= 415

ga1 	init 0
ga2 	init 0

opcode idtosc,a,kkiiio
	/* idtosc

	Sum 'iN' oscillators each spaced 'idet' Hz apart.

	kamp: 		amplitude
	kfrq:		frequency
	ifn: 		oscillator function
	iN: 		number of oscillators
	idet: 		detune applied to each oscillator
	*/
    asig init 0
    kamp, kfrq, ifn, iN, idet, icnt xin
    if icnt >= iN - 1 goto syn
        asig idtosc kamp, kfrq, ifn, iN, idet, icnt + 1
    syn:
         xout asig + oscili(kamp / iN, kfrq + idet * icnt, ifn)
endop

instr 1
	/* Instrument with 3 oscillators + 2 pluck

	p4: 		amplitude
	p5: 		pch
	p6: 		attack time
	*/
	iampPlk  	= p4 * 0.55
	iampOsc		= p4 * 0.45
	icps 		= cpspch(p5)
	iatk 		= p6
	idetune 	= 3 / p3
	aosc  		idtosc  iampOsc, icps, 1, 3, idetune / 3
	kenv  		expseg 0.01, iatk, 1, p3 - iatk, 0.001
	aplkA   	pluck iampPlk * 0.35, icps, icps * 6, 2, 1
	aplkB  		pluck iampPlk * 0.65, icps, icps * 6, 0, 1
	aplk  		= (aplkA + aplkB) * 0.5
	aout 		linen kenv * dcblock(aosc + aplk), 0.0001, p3, 0.01
	kch1 		randi .5, 12, .1
	kch1 		= .5 + kch1

	ga1 		+= aout	* kch1
	ga2 		+= aout	* (1 - kch1)

endin

instr 201
	/* Reverberation

	p4: 		gain
	*/
	iRoomSize 	= 0.99
	iDamp 		= 0.45
	igain       = p4
	ga1         *= igain
	ga2         *= igain
	aL, aR  	freeverb ga1, ga2, iRoomSize, iDamp, sr, 0
				outs aL+ga1,aR+ga2
	ga1 		= 0
	ga2 		= 0

endin

</CsInstruments>
<CsScore>

;;; Csound Score for "Quieto mattino scomposto"
;;; Gianantonio Patella -- August 2023 (rev. December 2024)

f2 0 8192 7 1 8192 -1
f1 0 8192 30 2 0 6

i201 0 194.250  5.33

i1 0.000 5 0.1 6.050 2.0000
i1 2.000 9 0.4 7.080 0.0100
i1 3.000 6 0.2 6.000 0.0010
i1 3.250 3 0.1 8.030 0.1000
i1 3.750 4 0.2 7.050 1.0000
i1 3.750 7 0.3 7.030 2.0000
i1 7.750 2 0.1 8.050 0.0100
i1 9.750 20 0.4 6.050 0.0010
i1 10.750 1 0.2 7.080 0.1000
i1 11.000 8 0.1 6.000 1.0000
i1 11.500 5 0.2 8.030 2.0000
i1 11.500 9 0.3 7.050 0.0100
i1 15.500 6 0.1 7.030 0.0010
i1 17.500 3 0.4 8.050 0.1000
i1 18.500 4 0.2 6.050 1.0000
i1 18.750 7 0.1 7.080 2.0000
i1 19.250 2 0.2 6.000 0.0100
i1 19.250 20 0.3 8.030 0.0010
i1 23.250 1 0.1 7.050 0.1000
i1 25.250 8 0.4 7.030 1.0000
i1 26.250 5 0.2 8.050 2.0000
i1 26.500 9 0.1 6.050 0.0100
i1 27.000 6 0.2 7.080 0.0010
i1 27.000 3 0.3 6.000 0.1000
i1 31.000 4 0.1 8.030 1.0000
i1 33.000 7 0.4 7.050 2.0000
i1 34.000 2 0.2 7.030 0.0100
i1 34.250 20 0.1 8.050 0.0010
i1 34.750 1 0.2 6.050 0.1000
i1 34.750 8 0.3 7.080 1.0000
i1 38.750 5 0.1 6.000 2.0000
i1 40.750 9 0.4 8.030 0.0100
i1 41.750 6 0.2 7.050 0.0010
i1 42.000 3 0.1 7.030 0.1000
i1 42.500 4 0.2 8.050 1.0000
i1 42.500 7 0.3 6.050 2.0000
i1 46.500 2 0.1 7.080 0.0100
i1 48.500 20 0.4 6.000 0.0010
i1 49.500 1 0.2 8.030 0.1000
i1 49.750 8 0.1 7.050 1.0000
i1 50.250 5 0.2 7.030 2.0000
i1 50.250 9 0.3 8.050 0.0100
i1 54.250 6 0.1 6.050 0.0010
i1 56.250 3 0.4 7.080 0.1000
i1 57.250 4 0.2 6.000 1.0000
i1 57.500 7 0.1 8.030 2.0000
i1 58.000 2 0.2 7.050 0.0100
i1 58.000 20 0.3 7.030 0.0010
i1 62.000 1 0.1 8.050 0.1000
i1 64.000 8 0.4 6.050 1.0000
i1 65.000 5 0.2 7.080 2.0000
i1 65.250 9 0.1 6.000 0.0100
i1 65.750 6 0.2 8.030 0.0010
i1 65.750 3 0.3 7.050 0.1000
i1 69.750 4 0.1 7.030 1.0000
i1 71.750 7 0.4 8.050 2.0000
i1 72.750 2 0.2 6.050 0.0100
i1 73.000 20 0.1 7.080 0.0010
i1 73.500 1 0.2 6.000 0.1000
i1 73.500 8 0.3 8.030 1.0000
i1 77.500 5 0.1 7.050 2.0000
i1 79.500 9 0.4 7.030 0.0100
i1 80.500 6 0.2 8.050 0.0010
i1 80.750 3 0.1 6.050 0.1000
i1 81.250 4 0.2 7.080 1.0000
i1 81.250 7 0.3 6.000 2.0000
i1 85.250 2 0.1 8.030 0.0100
i1 87.250 20 0.4 7.050 0.0010
i1 88.250 1 0.2 7.030 0.1000
i1 88.500 8 0.1 8.050 1.0000
i1 89.000 5 0.2 6.050 2.0000
i1 89.000 9 0.3 7.080 0.0100
i1 93.000 6 0.1 6.000 0.0010
i1 95.000 3 0.4 8.030 0.1000
i1 96.000 4 0.2 7.050 1.0000
i1 96.250 7 0.1 7.030 2.0000
i1 96.750 2 0.2 8.050 0.0100
i1 96.750 20 0.3 6.050 0.0010
i1 100.750 1 0.1 7.080 0.1000
i1 102.750 8 0.4 6.000 1.0000
i1 103.750 5 0.2 8.030 2.0000
i1 104.000 9 0.1 7.050 0.0100
i1 104.500 6 0.2 7.030 0.0010
i1 104.500 3 0.3 8.050 0.1000
i1 108.500 4 0.1 6.050 1.0000
i1 110.500 7 0.4 7.080 2.0000
i1 111.500 2 0.2 6.000 0.0100
i1 111.750 20 0.1 8.030 0.0010
i1 112.250 1 0.2 7.050 0.1000
i1 112.250 8 0.3 7.030 1.0000
i1 116.250 5 0.1 8.050 2.0000
i1 118.250 9 0.4 6.050 0.0100
i1 119.250 6 0.2 7.080 0.0010
i1 119.500 3 0.1 6.000 0.1000
i1 120.000 4 0.2 8.030 1.0000
i1 120.000 7 0.3 7.050 2.0000
i1 124.000 2 0.1 7.030 0.0100
i1 126.000 20 0.4 8.050 0.0010
i1 127.000 1 0.2 6.050 0.1000
i1 127.250 8 0.1 7.080 1.0000
i1 127.750 5 0.2 6.000 2.0000
i1 127.750 9 0.3 8.030 0.0100
i1 131.750 6 0.1 7.050 0.0010
i1 133.750 3 0.4 7.030 0.1000
i1 134.750 4 0.2 8.050 1.0000
i1 135.000 7 0.1 6.050 2.0000
i1 135.500 2 0.2 7.080 0.0100
i1 135.500 20 0.3 6.000 0.0010
i1 139.500 1 0.1 8.030 0.1000
i1 141.500 8 0.4 7.050 1.0000
i1 142.500 5 0.2 7.030 2.0000
i1 142.750 9 0.1 8.050 0.0100
i1 143.250 6 0.2 6.050 0.0010
i1 143.250 3 0.3 7.080 0.1000
i1 147.250 4 0.1 6.000 1.0000
i1 149.250 7 0.4 8.030 2.0000
i1 150.250 2 0.2 7.050 0.0100
i1 150.500 20 0.1 7.030 0.0010
i1 151.000 1 0.2 8.050 0.1000
i1 151.000 8 0.3 6.050 1.0000
i1 155.000 5 0.1 7.080 2.0000
i1 157.000 9 0.4 6.000 0.0100
i1 158.000 6 0.2 8.030 0.0010
i1 158.250 3 0.1 7.050 0.1000
i1 158.750 4 0.2 7.030 1.0000
i1 158.750 7 0.3 8.050 2.0000
i1 162.750 2 0.1 6.050 0.0100
i1 164.750 20 0.4 7.080 0.0010
i1 165.750 1 0.2 6.000 0.1000
i1 166.000 8 0.1 8.030 1.0000
i1 166.500 5 0.2 7.050 2.0000
i1 166.500 9 0.3 7.030 0.0100
i1 170.500 6 0.1 8.050 0.0010
i1 172.500 3 0.4 6.050 0.1000
i1 173.500 4 0.2 7.080 1.0000
i1 173.750 7 0.1 6.000 2.0000
i1 174.250 2 0.2 8.030 0.0100
i1 174.250 20 0.3 7.050 0.0010
i1 178.250 1 0.1 7.030 0.1000
i1 180.250 8 0.4 8.050 1.0000
</CsScore>
</CsoundSynthesizer>


